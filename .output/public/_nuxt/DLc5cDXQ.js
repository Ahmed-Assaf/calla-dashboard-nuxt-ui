import{_ as N}from"./Bl80ofdR.js";import{h as z,a9 as H,H as A,q as y,i as C,r as M,o as h,c as w,b as s,w as n,k as a,a as e,F as J,B as K,l as B,E as P,a4 as E,G as F,t as v,C as I,g as O,n as Q,v as W,a5 as X,d as Y,P as Z}from"./CST-ZKdJ.js";import{b as ee,_ as te,a as se}from"./BBnZmDfW.js";import{a as ae,_ as oe}from"./pkxXHx2O.js";import{_ as le}from"./dT0B_MhN.js";import{_ as ne}from"./DOuWiDWK.js";import{c as re,a as T,f as ie,_ as ue}from"./BQvatdOu.js";import{_ as de}from"./Cyka-yFI.js";import{_ as ce}from"./CmCr9Oc2.js";import{_ as me}from"./DyLLn6GT.js";import{u as G}from"./BW_eh0Ps.js";import{a as pe,_ as _e}from"./Cx08xRP1.js";import{_ as be}from"./BgesNrwq.js";import"./DBd5Fm0R.js";import"./CB507DKx.js";import"./DevvwYKm.js";import"./CxIZtCgj.js";import"./BVVV9AMk.js";import"./CAPv1DYq.js";import"./P6enAWVv.js";import"./C298fiGN.js";import"./DeCzlx8H.js";import"./D5w4h-Vr.js";const fe={class:"grid grid-cols-12 gap-6"},ge={class:"grid grid-cols-12 gap-5"},R={__name:"Action",props:{buttonLabel:{type:String,required:!0}},setup(U){const u=U,{t:r}=z();H(),A();const{fetchData:m,resultData:_,loading:f}=G();f.value=!1;const c=y(!1),$=C(()=>[{label:r("user.permissions.order_management"),value:"order_management"},{label:r("user.permissions.add_users"),value:"add_users"},{label:r("user.permissions.make_settlement"),value:"make_settlement"},{label:r("user.permissions.chats"),value:"chats"},{label:r("user.permissions.product_management"),value:"product_management"}]),o=M({username:void 0,job_name:void 0,permissions:[]}),b=C(()=>re({username:T().required(r("inputs.username.required")),job_name:T().required(r("inputs.job_name.required")),password:T().min(6,r("inputs.password.invalid.length")).required(r("inputs.password.required")),permissions:ie().min(1,r("inputs.permissions.required"))})),g=async()=>{};return(l,t)=>{const p=le,x=ne,k=ue,D=de,S=ae,j=ce,q=me;return h(),w("div",null,[s(p,{class:"justify-between gap-7 px-3",label:l.$t(u.buttonLabel),"icon-image":"/images/icons/plus-square-filled-white.svg",ui:{rounded:"rounded-xl"},size:"xl",onClick:t[0]||(t[0]=d=>c.value=!0)},null,8,["label"]),s(q,{modelValue:a(c),"onUpdate:modelValue":t[4]||(t[4]=d=>P(c)?c.value=d:null),onClose:t[5]||(t[5]=d=>c.value=!1),header:{title:l.$t("user.details")}},{default:n(()=>[s(j,{button:{label:u.buttonLabel,radius:"rounded-xl",loading:a(f)},state:a(o),schema:a(b),onSubmit:g,ref:"form"},{default:n(()=>[e("div",fe,[s(k,{label:l.$t("inputs.username.label"),name:"username",class:"md:col-span-6 col-span-12"},{default:n(()=>[s(x,{modelValue:a(o).username,"onUpdate:modelValue":t[1]||(t[1]=d=>a(o).username=d),placeholder:l.$t("inputs.username.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(k,{label:l.$t("inputs.job_name.label"),name:"job_name",class:"md:col-span-6 col-span-12"},{default:n(()=>[s(x,{modelValue:a(o).job_name,"onUpdate:modelValue":t[2]||(t[2]=d=>a(o).job_name=d),placeholder:l.$t("inputs.job_name.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(k,{label:l.$t("inputs.password.label"),name:"password",class:"col-span-12"},{default:n(()=>[s(D,{modelValue:a(o).password,"onUpdate:modelValue":t[3]||(t[3]=d=>a(o).password=d),placeholder:l.$t("inputs.password.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(k,{label:l.$t("inputs.permissions.label"),name:"permissions",class:"col-span-12"},{default:n(()=>[e("div",ge,[(h(!0),w(J,null,K(a($),(d,V)=>(h(),B(S,{key:V,modelValue:a(o).permissions[V],"onUpdate:modelValue":L=>a(o).permissions[V]=L,label:d.label,value:d.value,class:"md:col-span-4 sm:col-span-6 col-span-12"},null,8,["modelValue","onUpdate:modelValue","label","value"]))),128))])]),_:1},8,["label"])])]),_:1},8,["button","state","schema"])]),_:1},8,["modelValue","header"])])}}},he={class:"p-4"},$e={class:"text-center mb-4"},ve={class:"flex items-center justify-center gap-3 flex-wrap"},xe={__name:"Delete",props:{userId:{type:Number,required:!0},buttonLabel:{type:String,required:!0}},emits:["deleted"],setup(U,{emit:u}){const r=U,m=u,{userInfo:_}=E(F()),{fetchData:f,loading:c}=G();c.value=!1;const $=o=>{f({url:`provider/products/${r.userId}`,method:"DELETE",headers:{Authorization:`Bearer ${_.value.token}`},getSuccess:!0,onSuccess:()=>{m("deleted"),o()}})};return(o,b)=>{const g=I,l=pe;return h(),B(l,null,{panel:n(({close:t})=>[e("div",he,[e("h6",$e,v(o.$t("user.delete.sure")),1),e("div",ve,[s(g,{color:"red",size:"lg",label:o.$t("user.delete.this"),loading:a(c),onClick:p=>$(t)},null,8,["label","loading","onClick"]),s(g,{color:"primary",size:"lg",label:o.$t("general.cancel"),onClick:t},null,8,["label","onClick"])])])]),default:n(()=>[s(g,{label:o.$t(r.buttonLabel),ui:{rounded:"rounded-xl"},size:"xl",color:"red"},null,8,["label"])]),_:1})}}},ke={class:"h-full flex flex-col gap-7"},Ue={class:"flex-1"},Ve={class:"mb-7"},we={class:"text-[10px] text-textLightColor"},ye=e("p",{class:"font-bukra text-xs"},"اسم المستخدم",-1),Ce={class:"mb-7"},De={class:"text-[10px] text-textLightColor"},Se=e("p",{class:"font-bukra text-xs"},"اسم الوظيفة",-1),je={class:"mb-7"},qe={class:"text-[10px] text-textLightColor"},Le=e("p",{class:"font-bukra text-xs"}," استقبال طلبات جديد / إضافة مستخدمين / عمل تسوية / المحادثات / ادارة المنتجات ",-1),Te={class:"text-[10px] text-textLightColor"},Be={class:"flex items-center gap-2"},Ie={key:0,class:"font-bukra text-xs"},Ge={key:1,class:"font-bukra text-xs"},ze={class:"flex items-center flex-wrap gap-3"},Ae=O({__name:"DetailsCard",setup(U){const u=y(!1),r=C(()=>u.value?"/images/icons/eye.svg":"/images/icons/eye-closed.svg");return(m,_)=>{const f=Q,c=I,$=R,o=xe,b=be;return h(),B(b,{header:{title:m.$t("user.details")},class:"flex flex-col"},{default:n(()=>[e("div",ke,[e("ul",Ue,[e("li",Ve,[e("small",we,v(m.$t("user.table.name")),1),ye]),e("li",Ce,[e("small",De,v(m.$t("user.table.job_name")),1),Se]),e("li",je,[e("small",qe,v(m.$t("inputs.permissions.label")),1),Le]),e("li",null,[e("small",Te,v(m.$t("inputs.password.label")),1),e("div",Be,[a(u)?(h(),w("p",Ie,"12345678")):(h(),w("p",Ge,"**********")),s(c,{variant:"link",class:"font-normal",onClick:_[0]||(_[0]=g=>u.value=!a(u)),padded:!1},{leading:n(()=>[s(f,{src:a(r),size:"2xs"},null,8,["src"])]),_:1})])])]),e("div",ze,[s($,{"button-label":m.$t("user.edit")},null,8,["button-label"]),s(o,{"button-label":m.$t("user.delete.this"),"user-id":1,onUpdated:_[1]||(_[1]=()=>{})},null,8,["button-label"])])])]),_:1},8,["header"])}}}),Pe={class:"grid grid-cols-12 mb-6"},Ee={class:"col md:col-span-7 col-span-12"},Fe=["src"],Re={class:"flex items-center gap-2 w-max"},Ne=["alt"],He={class:"col md:col-span-5 col-span-12"},_t={__name:"index",setup(U){const{t:u}=z(),r=A(),{userInfo:m}=E(F()),{fetchData:_,loading:f,resultData:c}=G(),$=C(()=>[{key:"row_id",label:u("general.table.id")},{key:"id",label:u("user.table.id"),sortable:!0},{key:"job",label:u("user.table.job"),sortable:!0},{key:"created_at",label:u("general.table.date"),sortable:!0}]),o=y({});X("paginateData",o);const b=(t=1)=>{_({url:"provider/products/index",headers:{Authorization:`Bearer ${m.value.token}`},params:{page:t},onSuccess:()=>{o.value=c.value.pagination}})},g=t=>{console.log(t);const p=l.value.findIndex(x=>x.id===t.id);p===-1?l.value=[t]:l.value.splice(p,1)},l=y([]);return W(()=>{b()}),(t,p)=>{const x=N,k=Z,D=te,S=se,j=I,q=oe,d=R,V=ee,L=Ae;return h(),w("div",null,[s(x,{title:[{label:t.$t("user.plural")}]},null,8,["title"]),e("div",Pe,[e("div",Ee,[s(V,{class:"stripe-table !mb-0","onUpdate:page":b},{tfoot:n(()=>[s(d,{"button-label":t.$t("user.create_confirm")},null,8,["button-label"])]),default:n(()=>[s(q,{columns:a($),rows:a(c).products,loading:a(f),loadingState:{label:t.$t("general.loading")},emptyState:{label:t.$t("general.no_data")},ui:{wrapper:"the-data-table hidden-select",checkbox:{padding:"hidden"}},modelValue:a(l),"onUpdate:modelValue":p[0]||(p[0]=i=>P(l)?l.value=i:null),onSelect:p[1]||(p[1]=i=>g(i))},{"row_id-data":n(({index:i})=>[e("span",null,v(i+1),1)]),"image-data":n(({row:i})=>[e("img",{src:i.image?i.image:"/images/product-default.svg",alt:"",class:"w-12 aspect-[1] object-contain"},null,8,Fe)]),"avg_rate-data":n(({row:i})=>[e("div",null,[Y(v(i.avg_rate)+" ",1),s(k,{name:"i-heroicons-star-solid",dynamic:"",class:"text-base text-starActive"})])]),"is_available-data":n(({row:i})=>[s(D,{status:i.is_available,"product-id":i.id,onUpdated:b},null,8,["status","product-id"])]),"actions-data":n(({row:i})=>[e("div",Re,[s(S,{"product-id":i.id,onDeleted:b},null,8,["product-id"]),s(j,{to:a(r)({name:"products-id",params:{id:i.id}}),square:"",class:"rounded-full",size:"2xs"},{default:n(()=>[e("img",{src:_e,alt:t.$t("product.edit"),class:"w-4 h-4"},null,8,Ne)]),_:2},1032,["to"])])]),_:1},8,["columns","rows","loading","loadingState","emptyState","modelValue"])]),_:1})]),e("div",He,[s(L)])])])}}};export{_t as default};
