import{g as V,h as U,r as A,i as K,o as b,c as S,j as I,b as h,w,k as a,a as O,t as k,d as P,l as B,m as Y,n as Z,q as C,s as q,v as x,x as N,y as ee,z as te,A as ne,F as oe,B as ae,C as G,D as se,E as le,G as ue,H as re,I as ie,J as de}from"./CST-ZKdJ.js";import{_ as z}from"./DOuWiDWK.js";import{c as M,a as T,_ as R,b as pe}from"./BQvatdOu.js";import{_ as H}from"./Cyka-yFI.js";import{_ as ce}from"./DOaSUxXF.js";import{_ as j}from"./CmCr9Oc2.js";import{u as L}from"./BW_eh0Ps.js";import{_ as me}from"./DyLLn6GT.js";import"./CB507DKx.js";import"./DevvwYKm.js";import"./CxIZtCgj.js";import"./B5lnwlPY.js";import"./C298fiGN.js";import"./DeCzlx8H.js";import"./P6enAWVv.js";import"./BVbT1tgN.js";import"./D5w4h-Vr.js";import"./BVVV9AMk.js";import"./CAPv1DYq.js";const fe=["src"],he=V({__name:"SendCode",props:{imgSrc:{type:String,default:""}},emits:["send"],setup(e,{emit:u}){const n=e,s=[{id:"00966",label:"qw",avatar:{src:"https://avatars.githubusercontent.com/u/739984?v=4"}},{id:"2",label:"qw",avatar:{src:"https://avatars.githubusercontent.com/u/904724?v=4"}},{id:"3",label:"qw",avatar:{src:"https://avatars.githubusercontent.com/u/7547335?v=4"}}],{t}=U(),l=u,c=A({phone:void 0,country_code:s[0].id}),y=K(()=>{var d;return(d=s.find(v=>v.id===c.country_code))==null?void 0:d.avatar}),p=M({phone:T().required(t("inputs.phone.required")),country_code:T().required(t("inputs.country_code.required"))}),{resultData:f,fetchData:r,loading:i}=L();i.value=!1;const o=async()=>{await r({url:"provider/forget-password-send-code",method:"post",body:c,getSuccess:!0,onSuccess:async()=>{l("send",c)}})};return(d,v)=>{const _=Z,D=ce,F=z,$=R,m=j;return b(),S("div",null,[n.imgSrc?(b(),S("img",{key:0,src:n.imgSrc,class:"mx-auto w-[60px] mb-9 max-w-full"},null,8,fe)):I("",!0),h(m,{button:{label:d.$t("general.confirm"),radius:"rounded-lg mx-auto block min-w-[173px] max-w-full",loading:a(i)},state:a(c),schema:a(p),onSubmit:o},{default:w(()=>[h($,{label:d.$t("inputs.phone.label"),name:"phone"},{default:w(()=>[h(F,{modelValue:a(c).phone,"onUpdate:modelValue":v[1]||(v[1]=g=>a(c).phone=g),placeholder:d.$t("inputs.phone.placeholder")},{trailing:w(()=>[h(D,{modelValue:a(c).country_code,"onUpdate:modelValue":v[0]||(v[0]=g=>a(c).country_code=g),options:s,searchable:"","searchable-placeholder":d.$t("inputs.country_code.search"),"clear-search-on-close":"",trailingIcon:"",placeholder:"Select a person",variant:"none",padded:!1,uiMenu:{width:"min-w-36 w-fit",trigger:"py-3 px-0"},popper:{placement:"bottom-start",offsetDistance:0},"option-attribute":"label","value-attribute":"id"},{"option-empty":w(({query:g})=>[O("q",null,k(g),1),P(" "+k(d.$t("general.not_found")),1)]),leading:w(()=>[a(c).country_code?(b(),B(_,Y({key:0},a(y),{size:"2xs",class:"relative after:-end-1 after:block after:absolute after:h-full after:content-[''] after:border-e after:border-strokeLightGray after:border-solid"}),null,16)):I("",!0)]),_:1},8,["modelValue","searchable-placeholder"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["button","state","schema"])])}}});var W=V({name:"SingleOtpInput",props:{inputType:{type:String,validator:e=>["number","tel","letter-numeric","password"].includes(e),default:"tel"},inputmode:{type:String,default:"numeric"},value:{type:[String,Number]},separator:{type:String},focus:{type:Boolean},inputClasses:{type:[String,Array]},conditionalClass:{type:String},shouldAutoFocus:{type:Boolean},isLastChild:{type:Boolean},placeholder:{type:String},isDisabled:{type:Boolean}},emits:["on-change","on-keydown","on-paste","on-focus","on-blur"],setup(e,u){let{emit:n}=u;const s=C(e.value||""),t=C(null),l=()=>(s.value=s.value.toString(),s.value.length>1&&(s.value=s.value.slice(0,1)),n("on-change",s.value)),c=o=>o>=65&&o<=90,y=o=>o>=48&&o<=57||o>=96&&o<=105,p=o=>{e.isDisabled&&o.preventDefault();const d=o||window.event,v=d.which?d.which:d.keyCode;y(v)||e.inputType==="letter-numeric"&&c(v)||[8,9,13,37,39,46,86].includes(v)?n("on-keydown",o):d.preventDefault()},f=o=>n("on-paste",o),r=()=>(t.value.select(),n("on-focus")),i=()=>n("on-blur");return q(()=>e.value,(o,d)=>{o!==d&&(s.value=o)}),q(()=>e.focus,(o,d)=>{d!==o&&t.value&&e.focus&&(t.value.focus(),t.value.select())}),x(()=>{t.value&&e.focus&&e.shouldAutoFocus&&(t.value.focus(),t.value.select())}),{handleOnChange:l,handleOnKeyDown:p,handleOnPaste:f,handleOnFocus:r,handleOnBlur:i,input:t,model:s,inputTypeValue:e.inputType==="letter-numeric"?"text":e.inputType}}});const ve={style:{display:"flex","align-items":"center"}},ge=["type","inputmode","placeholder","disabled"],be={key:0},ye=["innerHTML"];function we(e,u,n,s,t,l){return b(),S("div",ve,[N(O("input",{"data-test":"single-input",type:e.inputTypeValue,inputmode:e.inputmode,placeholder:e.placeholder,disabled:e.isDisabled,ref:"input",min:"0",max:"9",maxlength:"1",pattern:"[0-9]","onUpdate:modelValue":u[0]||(u[0]=c=>e.model=c),class:te([e.inputClasses,e.conditionalClass,{"is-complete":e.model}]),onInput:u[1]||(u[1]=function(){return e.handleOnChange&&e.handleOnChange(...arguments)}),onKeydown:u[2]||(u[2]=function(){return e.handleOnKeyDown&&e.handleOnKeyDown(...arguments)}),onPaste:u[3]||(u[3]=function(){return e.handleOnPaste&&e.handleOnPaste(...arguments)}),onFocus:u[4]||(u[4]=function(){return e.handleOnFocus&&e.handleOnFocus(...arguments)}),onBlur:u[5]||(u[5]=function(){return e.handleOnBlur&&e.handleOnBlur(...arguments)})},null,42,ge),[[ee,e.model]]),!e.isLastChild&&e.separator?(b(),S("span",be,[O("span",{innerHTML:e.separator},null,8,ye)])):I("",!0)])}W.render=we;const _e=8,$e=37,Se=39,Oe=46;var J=V({name:"Vue3OtpInput",components:{SingleOtpInput:W},props:{value:{type:String,default:"",required:!0},numInputs:{default:4},separator:{type:String,default:"**"},inputClasses:{type:[String,Array]},conditionalClass:{type:Array,default:[]},inputType:{type:String,validator:e=>["number","tel","letter-numeric","password"].includes(e)},inputmode:{type:String,validator:e=>["numeric","text","tel","none"].includes(e),default:"numeric"},shouldAutoFocus:{type:Boolean,default:!1},placeholder:{type:Array,default:[]},isDisabled:{type:Boolean,default:!1},shouldFocusOrder:{type:Boolean,default:!1}},setup(e,u){let{emit:n}=u;const s=C(0),t=C([]),l=C([]);q(()=>e.value,m=>{const g=a(m).split("");t.value=g},{immediate:!0});const c=m=>{s.value=m},y=()=>{s.value=-1},p=()=>t.value.join("").length===e.numInputs?(n("update:value",t.value.join("")),n("on-complete",t.value.join(""))):"Wait until the user enters the required number of characters",f=m=>{s.value=Math.max(Math.min(e.numInputs-1,m),0)},r=()=>{f(s.value+1)},i=()=>{f(s.value-1)},o=m=>{l.value=Object.assign([],t.value),t.value[s.value]=m,l.value.join("")!==t.value.join("")&&(n("update:value",t.value.join("")),n("on-change",t.value.join("")),p())},d=m=>{m.preventDefault();const g=m.clipboardData.getData("text/plain").slice(0,e.numInputs-s.value).split("");if(e.inputType==="number"&&!g.join("").match(/^\d+$/)||e.inputType==="letter-numeric"&&!g.join("").match(/^\w+$/))return"Invalid pasted data";const E=t.value.slice(0,s.value).concat(g);return E.slice(0,e.numInputs).forEach(function(Q,X){t.value[X]=Q}),f(E.slice(0,e.numInputs).length),p()},v=m=>{o(m),r()},_=()=>{t.value.length>0&&(n("update:value",""),n("on-change","")),t.value=[],s.value=0},D=m=>{const g=m.split("");g.length===e.numInputs&&(t.value=g,n("update:value",t.value.join("")),n("on-complete",t.value.join("")))},F=(m,g)=>{switch(m.keyCode){case _e:m.preventDefault(),o(""),i();break;case Oe:m.preventDefault(),o("");break;case $e:m.preventDefault(),i();break;case Se:m.preventDefault(),r();break;default:$(g);break}},$=m=>{e.shouldFocusOrder&&setTimeout(()=>{const g=t.value.join("").length;m-g>=0&&(s.value=g,t.value[m]="")},100)};return{activeInput:s,otp:t,oldOtp:l,clearInput:_,handleOnPaste:d,handleOnKeyDown:F,handleOnBlur:y,changeCodeAtFocus:o,focusInput:f,focusNextInput:r,focusPrevInput:i,handleOnFocus:c,checkFilledAllInputs:p,handleOnChange:v,fillInput:D}}});const Ce={style:{display:"flex"},class:"otp-input-container"},ke={key:0,autocomplete:"off",name:"hidden",type:"text",style:{display:"none"}};function Ie(e,u,n,s,t,l){const c=ne("SingleOtpInput");return b(),S("div",Ce,[e.inputType==="password"?(b(),S("input",ke)):I("",!0),(b(!0),S(oe,null,ae(e.numInputs,(y,p)=>(b(),B(c,{key:p,focus:e.activeInput===p,value:e.otp[p],separator:e.separator,"input-type":e.inputType,inputmode:e.inputmode,"input-classes":e.inputClasses,conditionalClass:e.conditionalClass[p],"is-last-child":p===e.numInputs-1,"should-auto-focus":e.shouldAutoFocus,placeholder:e.placeholder[p],"is-disabled":e.isDisabled,onOnChange:e.handleOnChange,onOnKeydown:f=>e.handleOnKeyDown(f,p),onOnPaste:e.handleOnPaste,onOnFocus:f=>e.handleOnFocus(p),onOnBlur:e.handleOnBlur},null,8,["focus","value","separator","input-type","inputmode","input-classes","conditionalClass","is-last-child","should-auto-focus","placeholder","is-disabled","onOnChange","onOnKeydown","onOnPaste","onOnFocus","onOnBlur"]))),128))])}J.render=Ie;var De=(()=>{const e=J;return e.install=u=>{u.component("Vue3OtpInput",e)},e})();const Fe=["src"],Ve={class:"font-bukra text-center font-bold mb-2"},Te={class:"text-textLightColor text-center mb-5 text-xs"},Be={class:"font-bukra text-textBaseColor"},Ae={class:"otp"},Pe=V({__name:"ConfirmCode",props:{imgSrc:{type:String,default:""},sentState:{type:Object,default:{}}},emits:["confirm"],setup(e,{emit:u}){const n=e,s=C(null),t=u,l=A({code:void 0,...n.sentState}),{fetchData:c,loading:y}=L();y.value=!1;const p=async()=>{await c({url:"provider/forget-password-check-code",method:"post",body:l,getSuccess:!0,onSuccess:async()=>{t("confirm",l)}})};return(f,r)=>{const i=G,o=j;return b(),S("div",null,[n.imgSrc?(b(),S("img",{key:0,src:n.imgSrc,class:"mx-auto w-[150px] max-w-full"},null,8,Fe)):I("",!0),O("h6",Ve,k(f.$t("auth.verification_code.title")),1),O("p",Te,[P(k(f.$t("auth.verification_code.description"))+" ",1),O("span",Be,k(n.phone),1)]),h(o,{button:{label:f.$t("general.confirm"),radius:"rounded-lg block min-w-[173px] max-w-full",loading:a(y)},state:a(l),onSubmit:p},{"action-button":w(()=>[h(i,{type:"button",size:"xl",class:"rounded-lg block min-w-[173px] max-w-full",variant:"outline",onClick:r[1]||(r[1]=d=>f.$emit("back"))},{default:w(()=>[P(k(f.$t("general.back")),1)]),_:1})]),default:w(()=>[O("div",Ae,[h(a(De),{ref_key:"otpInput",ref:s,"input-classes":"otp-input",separator:"",inputType:"number","num-inputs":4,value:a(l).code,"onUpdate:value":r[0]||(r[0]=d=>a(l).code=d),"should-auto-focus":!0,dir:"ltr",placeholder:["-","-","-","-"],required:""},null,8,["value"])])]),_:1},8,["button","state"])])}}}),qe=V({__name:"ResetPassword",props:{imgSrc:{type:String,default:""},confirmedState:{type:Object,default:{}}},emits:["reset"],setup(e,{emit:u}){const n=e,s=u,{t}=U(),l=A({password:void 0,confirm_password:void 0,...n.confirmedState}),c=M({password:T().min(6,t("inputs.new_password.invalid.length")).required(t("inputs.new_password.required")),confirm_password:T().oneOf([pe("password"),null],t("inputs.confirm_new_password.invalid.match")).required(t("inputs.confirm_new_password.required"))}),{fetchData:y,loading:p}=L();p.value=!1;const f=async()=>{await y({url:"provider/reset-password",method:"post",body:l,getSuccess:!0,onSuccess:async()=>{s("reset",l)}})};return(r,i)=>{const o=H,d=R,v=j;return b(),S("div",null,[h(v,{button:{label:r.$t("general.confirm"),radius:"rounded-lg block min-w-[173px] max-w-full",loading:a(p)},state:a(l),schema:a(c),onSubmit:f},{default:w(()=>[N(O("input",{type:"text",name:"phone","onUpdate:modelValue":i[0]||(i[0]=_=>a(l).phone=_),hidden:""},null,512),[[se,a(l).phone]]),h(d,{label:r.$t("inputs.new_password.label"),name:"password",class:"mb-0"},{default:w(()=>[h(o,{modelValue:a(l).password,"onUpdate:modelValue":i[1]||(i[1]=_=>a(l).password=_),placeholder:r.$t("inputs.new_password.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),h(d,{label:r.$t("inputs.confirm_new_password.label"),name:"confirm_password",class:"mb-0"},{default:w(()=>[h(o,{modelValue:a(l).confirm_password,"onUpdate:modelValue":i[2]||(i[2]=_=>a(l).confirm_password=_),placeholder:r.$t("inputs.confirm_new_password.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["button","state","schema"])])}}}),Ue=V({__name:"ForgotPassword",setup(e){const{t:u}=U(),n=C(!1),s=C(!1),t=C(!1);let l=A({});const c=K(()=>{if(t.value){if(t.value)return u("auth.reset_password_title")}else return u("auth.forgot_password_title")}),y=async i=>{l=i,s.value=!0},p=async i=>{l=i,s.value=!1,t.value=!0},f=async()=>{await r()},r=async()=>{setTimeout(()=>{l={},s.value=!1,t.value=!1,n.value=!1},300)};return q(n,async i=>{i===!1&&await r()}),(i,o)=>{const d=G,v=he,_=Pe,D=qe,F=me;return b(),S("div",null,[h(d,{label:i.$t("auth.forgot_password"),onClick:o[0]||(o[0]=$=>n.value=!0),padded:!1,variant:"link",class:"font-normal",size:"xs"},null,8,["label"]),h(F,{modelValue:a(n),"onUpdate:modelValue":o[2]||(o[2]=$=>le(n)?n.value=$:null),onClose:o[3]||(o[3]=$=>n.value=!1),header:{title:a(c)}},{default:w(()=>[!a(s)&&!a(t)?(b(),B(v,{key:0,onSend:y,"img-src":"/images/password-device.svg"})):I("",!0),a(s)&&!a(t)?(b(),B(_,{key:1,onConfirm:p,onBack:o[1]||(o[1]=$=>s.value=!1),"img-src":"/images/otp.gif","sent-state":a(l)},null,8,["sent-state"])):I("",!0),a(t)&&!a(s)?(b(),B(D,{key:2,onReset:f,"confirmed-state":a(l)},null,8,["confirmed-state"])):I("",!0)]),_:1},8,["modelValue","header"])])}}}),je={class:"heading mb-6"},Le={class:"text-md font-bukra font-bold mb-2"},Ge={class:"text-xs font-bukra"},lt=V({__name:"login",setup(e){const{t:u}=U(),n=A({name:void 0,password:void 0,device_id:"11111111111",device_type:"web"}),s=M({name:T().required(u("inputs.username.required")),password:T().min(6,u("inputs.password.invalid.length")).required(u("inputs.password.required"))}),{setAuth:t}=ue(),l=re(),{resultData:c,fetchData:y,loading:p}=L();p.value=!1;const f=async()=>{await y({url:"provider/sign-in?count_notifications=2",method:"post",body:n,getSuccess:!0,onSuccess:async()=>{const r=ie("auth",{watch:!0});r.value=c.value,t(),await de(l({name:"index",replace:!0}))}})};return(r,i)=>{const o=G,d=z,v=R,_=H,D=Ue,F=j;return b(),S("div",null,[O("div",je,[O("h1",Le,k(r.$t("pages.auth.login")),1),O("p",Ge,[P(k(r.$t("auth.dont_have_account"))+" ",1),h(o,{label:r.$t("auth.register.label"),padded:!1,variant:"link",class:"font-normal",size:"xs"},null,8,["label"])])]),h(F,{button:{label:r.$t("pages.auth.login"),radius:"rounded-xl me-auto",loading:a(p)},state:a(n),schema:a(s),onSubmit:f},{default:w(()=>[h(v,{label:r.$t("inputs.username.label"),name:"username"},{default:w(()=>[h(d,{modelValue:a(n).name,"onUpdate:modelValue":i[0]||(i[0]=$=>a(n).name=$),placeholder:r.$t("inputs.username.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),h(v,{label:r.$t("inputs.password.label"),name:"password",class:"mb-0"},{default:w(()=>[h(_,{modelValue:a(n).password,"onUpdate:modelValue":i[1]||(i[1]=$=>a(n).password=$),placeholder:r.$t("inputs.password.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),h(D,{class:"w-fit ms-auto !mt-1"})]),_:1},8,["button","state","schema"])])}}});export{lt as default};
