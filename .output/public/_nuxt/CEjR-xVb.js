import{_ as ne}from"./Bl80ofdR.js";import{_ as ue}from"./idVGbEIg.js";import{c as re,a as c,_ as se}from"./BQvatdOu.js";import{_ as ie}from"./DOuWiDWK.js";import{_ as de,N as pe,aa as me,O as E,g as ce,Q as fe,R as K,q as y,ab as be,v as W,s as ye,Y as ge,i as z,S as _e,T as ve,o as b,c as L,a as w,m as he,$ as $e,z as Ve,ac as qe,h as we,a9 as ke,H as Se,r as Ce,a4 as Be,G as Ue,b as r,k as e,w as i,l as G,j as U,F as ze,B as Ie,t as Te,J as H,C as Oe}from"./CST-ZKdJ.js";import{u as je}from"./CB507DKx.js";import{u as Fe,_ as Ge,a as Le}from"./yprSt98c.js";import{_ as Ne}from"./CmCr9Oc2.js";import{_ as Re}from"./BgesNrwq.js";import{u as De}from"./BW_eh0Ps.js";import{_ as Me}from"./DBd5Fm0R.js";import"./DOaSUxXF.js";import"./DevvwYKm.js";import"./B5lnwlPY.js";import"./C298fiGN.js";import"./DeCzlx8H.js";import"./P6enAWVv.js";import"./BVbT1tgN.js";import"./D5w4h-Vr.js";import"./CxIZtCgj.js";import"./BVVV9AMk.js";const $=pe(E.ui.strategy,E.ui.textarea,me),Ae=ce({inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rows:{type:Number,default:3},maxrows:{type:Number,default:0},autoresize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autofocusDelay:{type:Number,default:100},resize:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(a){return Object.keys($.size).includes(a)}},color:{type:String,default:()=>$.default.color,validator(a){return[...E.ui.colors,...Object.keys($.color)].includes(a)}},variant:{type:String,default:()=>$.default.variant,validator(a){return[...Object.keys($.variant),...Object.values($.color).flatMap(d=>Object.keys(d))].includes(a)}},textareaClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},modelModifiers:{type:Object,default:()=>({})}},emits:["update:modelValue","blur","change"],setup(a,{emit:d}){const{ui:l,attrs:k}=fe("textarea",K(a,"ui"),$,K(a,"class")),{emitFormBlur:g,emitFormInput:h,inputId:p,color:N,size:R,name:I}=je(a,$),_=y(be({},a.modelModifiers,{trim:!1,lazy:!1,number:!1})),v=y(null),S=()=>{var s;a.autofocus&&((s=v.value)==null||s.focus())},V=()=>{if(a.autoresize){if(!v.value)return;v.value.rows=a.rows;const s=window.getComputedStyle(v.value),f=parseInt(s.paddingTop),C=parseInt(s.paddingBottom),t=f+C,J=parseInt(s.lineHeight),{scrollHeight:j}=v.value,F=(j-t)/J;F>a.rows&&(v.value.rows=a.maxrows?Math.min(F,a.maxrows):F)}},D=s=>{_.value.trim&&(s=s.trim()),_.value.number&&(s=qe(s)),d("update:modelValue",s),h()},T=s=>{V(),_.value.lazy||D(s.target.value)},O=s=>{const f=s.target.value;d("change",f),_.value.lazy&&D(f),_.value.trim&&(s.target.value=f.trim())},P=s=>{d("blur",s),g()};W(()=>{setTimeout(()=>{S()},a.autofocusDelay)}),ye(()=>a.modelValue,()=>{ge(V)}),W(()=>{setTimeout(()=>{S(),V()},100)});const M=z(()=>{var f,C;const s=((C=(f=l.value.color)==null?void 0:f[N.value])==null?void 0:C[a.variant])||l.value.variant[a.variant];return _e(ve(l.value.base,l.value.form,l.value.rounded,l.value.placeholder,l.value.size[R.value],a.padded?l.value.padding[R.value]:"p-0",s==null?void 0:s.replaceAll("{color}",N.value),!a.resize&&"resize-none"),a.textareaClass)});return{ui:l,attrs:k,name:I,inputId:p,textarea:v,textareaClass:M,onInput:T,onChange:O,onBlur:P}}}),He=["id","value","name","rows","required","disabled","placeholder"];function Pe(a,d,l,k,g,h){return b(),L("div",{class:Ve(a.ui.wrapper)},[w("textarea",he({id:a.inputId,ref:"textarea",value:a.modelValue,name:a.name,rows:a.rows,required:a.required,disabled:a.disabled,placeholder:a.placeholder,class:a.textareaClass},a.attrs,{onInput:d[0]||(d[0]=(...p)=>a.onInput&&a.onInput(...p)),onBlur:d[1]||(d[1]=(...p)=>a.onBlur&&a.onBlur(...p)),onChange:d[2]||(d[2]=(...p)=>a.onChange&&a.onChange(...p))}),null,16,He),$e(a.$slots,"default")],2)}const Je=de(Ae,[["render",Pe]]),Ee={class:"grid grid-cols-12"},Qe={class:"col lg:col-span-7 md:col-span-9 col-span-12 mb-8"},Ye=["alt"],Ke={key:2,class:"flex items-center gap-6 flex-wrap w-full mb-5"},We=w("img",{src:Me,width:"8"},null,-1),Xe=["src"],Ze={class:"text-xs text-textLightColor"},$t={__name:"index",setup(a){const d=y(null),{t:l}=we(),k=ke(),g=Se(),{fetchData:h,resultData:p,loading:N}=De();N.value=!1;const R=z(()=>[{label:l("product.types.simple"),value:"simple"},{label:l("product.types.multi"),value:"multi"}]),I=y([]),_=y(!1),v=async()=>{I.value.length||(_.value=!0,await h({url:"main-categories",onSuccess:()=>{I.value=p.value}})),_.value=!1},S=y([]),V=y(!1),D=async()=>{S.value.length||(V.value=!0,await h({url:`sub-categories/${t.category_id}`,onSuccess:()=>{S.value=p.value}})),V.value=!1},T=y([]),O=y(!1),P=async()=>{T.value.length||(O.value=!0,await h({url:"brands-list",onSuccess:()=>{T.value=p.value}})),O.value=!1},{thumbnails:M,imgsList:s,uploadImages:f,removeImage:C}=Fe(),t=Ce({type:void 0,category_id:null,sub_category_id:null,"title[ar]":void 0,"title[en]":void 0,stock:null,images:s.value,brand_id:null,"description[ar]":void 0,"description[en]":void 0,price:null,discount_type:"ratio",discount_amount:null}),J=z(()=>re({type:c().required(l("inputs.type.required")),category_id:c().required(l("inputs.category.required")),sub_category_id:c().required(l("inputs.sub_category.required")),"title[ar]":c().required(l("inputs.product_name.required")),"title[en]":c().required(l("inputs.product_name_en.required")),stock:t.type!=="multi"?c().required(l("inputs.quantity.required")):null,images:t.type!=="multi"?c().required(l("inputs.images.required")):null,brand_id:c().required(l("inputs.brand.required")),"description[ar]":c().required(l("inputs.product_description.ar.required")),"description[en]":c().required(l("inputs.product_description.en.required")),price:t.type!=="multi"?c().required(l("inputs.price.required")):null,discount_amount:t.type!=="multi"&&t.discount_type?c().required(l("inputs.discount_amount.required")):null})),j=z(()=>k.params.id!=="create"),F=z(()=>j.value?[{label:l("product.plural"),to:g({name:"products"})},{label:l("product.edit")}]:[{label:l("product.plural"),to:g({name:"products"})},{label:l("product.create_1")}]),X=z(()=>j.value?t.type==="multi"?{label:l("product.attribute.plural.edit"),radius:"rounded-xl me-auto",loading:B.value}:{label:l("product.confirm_edit"),radius:"rounded-xl me-auto",loading:B.value}:t.type==="multi"?{label:l("product.attribute.plural.add"),radius:"rounded-xl me-auto",loading:B.value}:{label:l("product.confirm_create"),radius:"rounded-xl me-auto",loading:B.value,trailing:{src:"/images/icons/plus-square-filled-white.svg"}}),{userInfo:Q}=Be(Ue()),B=y(!1),Z=async()=>{const o=new FormData(document.querySelector("form"));B.value=!0,j.value?await h({url:`provider/products/update/${k.params.id}`,method:"post",headers:{Authorization:`Bearer ${Q.value.token}`},params:{_method:"PUT"},body:o,getSuccess:!0,onSuccess:()=>{t.type==="multi"?H(g({name:"products-id-attributes",params:{id:k.params.id}})):H(g({name:"products",replace:!0}))}}):await h({url:"provider/products/store",method:"post",headers:{Authorization:`Bearer ${Q.value.token}`},body:o,getSuccess:!0,onSuccess:()=>{console.log(p.value),t.type==="multi"?H(g({name:"products-id-attributes",params:{id:p.value.product_id},query:{action:"create"}})):H(g({name:"products",replace:!0}))}}),B.value=!1};return(o,u)=>{const x=ne,A=ue,m=se,q=ie,ee=Oe,Y=Je,te=Le,ae=Ne,le=Re;return b(),L("div",null,[r(x,{title:e(F)},null,8,["title"]),w("div",Ee,[w("div",Qe,[r(le,null,{default:i(()=>[r(ae,{button:e(X),state:e(t),schema:e(J),onSubmit:Z,ref_key:"form",ref:d},{default:i(()=>[r(m,{label:o.$t("inputs.type.label"),name:"type",class:"mb-0"},{default:i(()=>[r(A,{modelValue:e(t).type,"onUpdate:modelValue":u[0]||(u[0]=n=>e(t).type=n),options:e(R),placeholder:o.$t("inputs.type.placeholder"),"value-attribute":"value","option-attribute":"label"},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"]),r(m,{label:o.$t("inputs.category.label"),name:"category_id",class:"mb-0"},{default:i(()=>[r(A,{modelValue:e(t).category_id,"onUpdate:modelValue":u[1]||(u[1]=n=>e(t).category_id=n),options:e(I),placeholder:o.$t("inputs.category.placeholder"),"value-attribute":"id","option-attribute":"name",loading:e(_),onOpen:v},null,8,["modelValue","options","placeholder","loading"])]),_:1},8,["label"]),r(m,{label:o.$t("inputs.sub_category.label"),name:"sub_category_id",class:"mb-0"},{default:i(()=>[r(A,{modelValue:e(t).sub_category_id,"onUpdate:modelValue":u[2]||(u[2]=n=>e(t).sub_category_id=n),options:e(S),placeholder:o.$t("inputs.sub_category.placeholder"),"value-attribute":"id","option-attribute":"name",loading:e(V),disabled:!e(t).category_id,onOpen:D},null,8,["modelValue","options","placeholder","loading","disabled"])]),_:1},8,["label"]),r(m,{label:o.$t("inputs.product_name.label"),name:"title[ar]"},{default:i(()=>[r(q,{modelValue:e(t)["title[ar]"],"onUpdate:modelValue":u[3]||(u[3]=n=>e(t)["title[ar]"]=n),placeholder:o.$t("inputs.product_name.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(m,{label:o.$t("inputs.product_name_en.label"),name:"title[en]"},{default:i(()=>[r(q,{modelValue:e(t)["title[en]"],"onUpdate:modelValue":u[4]||(u[4]=n=>e(t)["title[en]"]=n),placeholder:o.$t("inputs.product_name_en.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),!e(t).type||e(t).type==="simple"?(b(),G(m,{key:0,label:o.$t("inputs.quantity.label"),name:"stock"},{default:i(()=>[r(q,{modelValue:e(t).stock,"onUpdate:modelValue":u[5]||(u[5]=n=>e(t).stock=n),placeholder:o.$t("inputs.quantity.placeholder"),type:"number",min:"1"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):U("",!0),!e(t).type||e(t).type==="simple"?(b(),G(m,{key:1,label:o.$t("inputs.images.label"),class:"relative"},{default:i(()=>[r(q,{type:"file",class:"absolute top-0 left-0 w-full h-full z-[1] opacity-0 cursor-pointer",multiple:"",name:"images[]",onChange:u[6]||(u[6]=n=>e(f)(n))}),r(q,{placeholder:o.$t("inputs.images.placeholder"),icon:"i-heroicons-link",trailing:"",readonly:""},{leading:i(()=>[w("img",{src:Ge,alt:o.$t("inputs.images.label"),width:"18"},null,8,Ye)]),_:1},8,["placeholder"])]),_:1},8,["label"])):U("",!0),(!e(t).type||e(t).type==="simple")&&e(M)?(b(),L("div",Ke,[(b(!0),L(ze,null,Ie(e(M),(n,oe)=>(b(),L("div",{class:"w-16 relative",key:oe},[r(ee,{square:"",class:"absolute top-0 end-0 rtl:-translate-x-1/2 -translate-y-1/2 ltr:translate-x-1/2 rounded-full",onClick:xe=>e(C)(n),size:"2xs",color:"red"},{leading:i(()=>[We]),_:2},1032,["onClick"]),w("img",{src:n,class:"w-full aspect-[1] object-contain p-1 rounded-lg border border-solid border-strokeLightGray"},null,8,Xe)]))),128))])):U("",!0),r(m,{label:o.$t("inputs.brand.label"),name:"brand_id"},{default:i(()=>[r(A,{modelValue:e(t).brand_id,"onUpdate:modelValue":u[7]||(u[7]=n=>e(t).brand_id=n),options:e(T),placeholder:o.$t("inputs.brand.placeholder"),"value-attribute":"id","option-attribute":"name",loading:e(O),onOpen:P},null,8,["modelValue","options","placeholder","loading"])]),_:1},8,["label"]),r(m,{label:o.$t("inputs.product_description.ar.label"),name:"description[ar]"},{default:i(()=>[r(Y,{modelValue:e(t)["description[ar]"],"onUpdate:modelValue":u[8]||(u[8]=n=>e(t)["description[ar]"]=n),placeholder:o.$t("inputs.product_description.ar.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(m,{label:o.$t("inputs.product_description.en.label"),name:"description[en]"},{default:i(()=>[r(Y,{modelValue:e(t)["description[en]"],"onUpdate:modelValue":u[9]||(u[9]=n=>e(t)["description[en]"]=n),placeholder:o.$t("inputs.product_description.en.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),!e(t).type||e(t).type==="simple"?(b(),G(m,{key:3,label:o.$t("inputs.price.label"),name:"price"},{default:i(()=>[r(q,{modelValue:e(t).price,"onUpdate:modelValue":u[10]||(u[10]=n=>e(t).price=n),placeholder:o.$t("inputs.price.placeholder"),type:"number",min:"1"},{trailing:i(()=>[w("span",Ze,Te(o.$t("general.currency")),1)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):U("",!0),!e(t).type||e(t).type==="simple"?(b(),G(m,{key:4,label:o.$t("inputs.discount_type.label"),name:"discount_type"},{default:i(()=>[r(te,{options:[{value:"ratio",label:o.$t("inputs.discount_type.options.ratio")},{value:"number",label:o.$t("inputs.discount_type.options.number")},{value:null,label:o.$t("inputs.discount_type.options.none")}],modelValue:e(t).discount_type,"onUpdate:modelValue":u[11]||(u[11]=n=>e(t).discount_type=n)},null,8,["options","modelValue"])]),_:1},8,["label"])):U("",!0),(!e(t).type||e(t).type==="simple")&&e(t).discount_type?(b(),G(m,{key:5,label:o.$t("inputs.discount_amount.label"),name:"discount_amount"},{default:i(()=>[r(q,{modelValue:e(t).discount_amount,"onUpdate:modelValue":u[12]||(u[12]=n=>e(t).discount_amount=n),placeholder:o.$t("inputs.discount_amount.placeholder"),type:"number",min:"1"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):U("",!0)]),_:1},8,["button","state","schema"])]),_:1})])])])}}};export{$t as default};
